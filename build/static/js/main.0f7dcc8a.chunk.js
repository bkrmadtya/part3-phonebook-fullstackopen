(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(13),u=t.n(o),c=(t(21),t(14)),i=t(2),l=function(e){var n=e.name,t=e.number,r=e.deletePerson;return a.a.createElement("div",null,n," ",t," ",a.a.createElement("button",{onClick:r},"Delete"))},m=function(e){var n=e.addPerson,t=e.handleNameChange,r=e.handleNumberChange,o=e.newName,u=e.newNumber;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name: ",a.a.createElement("input",{onChange:t,value:o})),a.a.createElement("div",null,"number: ",a.a.createElement("input",{onChange:r,value:u})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},f=function(e){var n=e.filterPerson;return a.a.createElement("div",null,"filter shown with ",a.a.createElement("input",{onChange:n}))},d=function(e){var n=e.notification;if(null===n.message)return null;console.log(n.message,n.type),console.log("type",n.type);var t={color:"error"===n.type?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return a.a.createElement("div",{style:t},n.message)},s=t(3),b=t.n(s),h="api/persons",v=function(){return b.a.get(h).then(function(e){return e.data})},g=function(e){return b.a.post(h,e).then(function(e){return e.data})},p=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},E=function(e){return b.a.delete("".concat(h,"/").concat(e)).then(function(e){return e.status})},w=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),b=s[0],h=s[1],w=Object(r.useState)(""),y=Object(i.a)(w,2),j=y[0],O=y[1],C=Object(r.useState)(""),N=Object(i.a)(C,2),k=N[0],S=N[1],P=Object(r.useState)({message:null}),D=Object(i.a)(P,2),I=D[0],B=D[1];Object(r.useEffect)(function(){v().then(function(e){return o(e)})},[]);var J=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";B({message:e,type:n}),setTimeout(function(){return B({message:null})},1e4)};return console.log(I),a.a.createElement("div",null,a.a.createElement("h2",null,"Phonebook"),a.a.createElement(d,{notification:I}),a.a.createElement(f,{filterPerson:function(e){S(e.target.value)}}),a.a.createElement("h3",null,"add a new"),a.a.createElement(m,{addPerson:function(e){if(e.preventDefault(),t.find(function(e){return e.name===b.trim()})){var n=t.find(function(e){return e.name===b.trim()});if(n.number!==j){if(window.confirm("".concat(b," is already added to phonebook, replace the old number with a new one?"))){var r=Object(c.a)({},n,{number:j});p(n.id,r).then(function(e){o(t.map(function(t){return t.id!==n.id?t:e})),J("Updated number for ".concat(r.name,"."))})}}else J("Given phonenumber for ".concat(b," is already in the phonebook."),"error")}else{var a={name:b,number:j};g(a).then(function(e){o(t.concat(e)),J("Added ".concat(a.name))})}h(""),O("")},handleNameChange:function(e){h(e.target.value)},handleNumberChange:function(e){O(e.target.value)},newName:b,newNumber:j}),a.a.createElement("h3",null,"Numbers"),t.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())}).map(function(e){return a.a.createElement(l,{key:e.id,name:e.name,number:e.number,deletePerson:function(){return function(e){var n=e.name,r=e.id;window.confirm("Delete ".concat(n," ?"))&&E(r).then(function(e){204===e&&(o(t.filter(function(e){return e.id!==r})),J("Information of ".concat(n," is removed from server."),"error"))}).catch(function(e){o(t.filter(function(e){return e.id!==r})),J("Information of ".concat(n," has already been removed from server."),"error")})}(e)}})}))};u.a.render(a.a.createElement(w,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.0f7dcc8a.chunk.js.map